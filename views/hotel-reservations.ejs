<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Réservations</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles/rooms-list.css" />
    <link rel="stylesheet" href="styles/hotels-list-page.css">
    <!-- Boostrap -->

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Calistoga&family=Kantumruy+Pro:ital,wght@0,100..700;1,100..700&family=Martian+Mono:wght@100..800&family=Sorts+Mill+Goudy:ital@0;1&display=swap" rel="stylesheet">
    <!-- End fonts -->

    <!-- Boostrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <!-- Boostrap Icons -->

    <!-- Font awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Font Awesome CDN -->

    <!-- Own Styles -->
    <link rel="stylesheet" href="styles/hotels-list.css">
    <link rel="stylesheet" href="styles/user-reservations-page.css">
    <!-- Own Styles -->

</head>

<body>

    <main>
        <ol class="gradient-list">
          
          <% data.roomReservations.forEach((roomReservation, roomReservIndex) => { %>
           <% let room = roomReservation.room; %>
           <% let reservationsLoop = roomReservation.reservations; %>
           <% if(reservationsLoop.length > 0) { %>
           
            <% reservationsLoop.forEach((reservation, index) => { %>
            
           
          <li>

            <div class="row mb-2">

              <div class="col d-flex flex-column">
                <div class="col mt-3">
                    <div class="col"> <a class="hotel-name"><%= capitalizeFirstLetter(reservation.client.first_name) %> <%= capitalizeFirstLetter(reservation.client.last_name) %> </a></div>
                </div>

                
                <div class="row gy-1 d-flex flex-row col my-3">
                  <!-- links to google map city location  -->
                    <div class="col-6 location-type"><a class="link-secondary link-underline-opacity-25 link-opacity-50-hover" >
                      <%= room.room_name %></a>
                    </div>
                    <div class="col-6 location-type"><a class="link-secondary link-underline-opacity-25 link-opacity-50-hover">
                      <%= reservation.client.phone_number %></a>
                    </div>
                    <div class="col location-type"><a class="link-secondary link-underline-opacity-25 link-opacity-50-hover">
                      <%= reservation.client.email %></a>
                    </div>
                </div>
              </div>

              <div class="col-3 d-flex justify-content-center align-items-center">
                <h1><% categoryToIcon(data.hotel.category) %></h1>
              </div>

            </div>


            <div class="row">

              <div class="col-6">
                <img src="/images/blog2.jpg" class="img-fluid rounded-4" alt="">
              </div>
                <div class="col-6 d-flex flex-column-reverse">
                  <div class="row d-flex flex-column">

                    <div class="col d-flex justify-content-end location-type my-1" ><div class="me-3"><%= getStayShort(reservation.arrival_date, reservation.departure_date) %></div></div>
                    <div class="col d-flex justify-content-end price my-1"><div class="me-3"><%= reservation.price %>$</div></div>
                    <div class="col d-flex justify-content-end mt-2">
                      <a href="/hotel-reserv-details?roomId=<%= roomReservIndex %>&reservId=<%= index %>"><button class="btn btn-primary">< Voir Réservation</button></a>
                    </div>

                  </div>
                </div>
            </div>
            
        </li>
        <% }) %>
        <% } %>
          <% }) %>

        </ol>
      </main>    
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    

    <!-- Boostrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>